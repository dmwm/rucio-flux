replicaCount: 1
image:
  repository: registry.cern.ch/cmsrucio/rucio-server

httpd_config:
  encoded_slashes: "True"
  legacy_dn: "True"

optional_config:
  rucio_ca_path: "/cvmfs/grid.cern.ch/etc/grid-security/certificates/"
  policy_pkg_path: /opt/rucio/policy

optional_config:
  rucio_ca_path: "/cvmfs/grid.cern.ch/etc/grid-security/certificates/"
  policy_pkg_path: /opt/rucio/policy

# The server runs on port 80 and there is no need for SSL passthrough
ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/frontend-entry-points: http, https
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
  hosts:
    - cms-rucio.cern.ch
  tls: 
    - secretName: rucio-server.tls-secret

useSSL: false

ftsRenewal:
  enabled: true
  additionalEnvs:
    - name: USERCERT_NAME
      value: "usercert.pem"
    - name: USERKEY_NAME
      value: "new_userkey.pem"

serverResources:
  requests:
    memory: 500Mi
  limits:
    memory: 1500Mi

config:
  common:
      loglevel: "INFO"
  database:
      pool_size: 10

persistentVolumes:
  grid-cern-ch:
    name: csi-cvmfs-grid-pvc
    mountPath: /cvmfs/grid.cern.ch
